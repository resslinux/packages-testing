# Contributor: Michael Mason <ms13sp@gmail.com>
# Maintainer: Michael Zhou <zhoumichaely@gmail.com>
pkgbase=nano
pkgname=('nano-doc' 'nano')
pkgver=2.7.4.r48.g83ff644b
pkgrel=1
pkgdesc="Text Editor. GNU nano is designed to be a free replacement for the Pico text editor."
url="http://www.nano-editor.org/"
arch=('x86_64')
license=('GPL')
depends_doc=()
depends=('ncurses-lib')
makedepends=('ncurses' 'automake' 'autoconf' 'git' 'gettext')
source=(git://git.sv.gnu.org/nano.git)
md5sums=('SKIP')

pkgver() {
  cd "$pkgbase"
  
  git describe --long --tags | sed 's/^v//;s/\([^-]*-g\)/r\1/;s/-/./g'
}

build() {
  cd "$pkgbase"
  
  ./autogen.sh
  ./configure --prefix=/usr \
              --sysconfdir=/etc \
              --mandir=/usr/share/man \
              --infodir=/usr/share/info \
              --disable-nls
              
  make
}

package() {
  package-init
  
  cd "$pkgbase"
  
  make DESTDIR="$tmpdir" install
  
  install -Dm644 doc/nanorc.sample "$tmpdir"/etc/nanorc
}

package_nano-doc() {
  package-doc
}

package_nano() {
  package-base
}
